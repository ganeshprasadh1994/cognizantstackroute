var fs = require('fs');
var fn=["India2011.csv","IndiaSC2011.csv","IndiaST2011.csv"];
var b=[];
for(var l=0;l<fn.length;l++)
{
var f = fs.readFileSync(fn[l],"utf8");
var line = f.split("\n");
  var ik = line.length-1;
 var hd=line[0].split(",");
 var z=hd.indexOf("Age-group"),
     z1=hd.indexOf("Total/ Rural/ Urban"),
   z2=hd.indexOf("Literate - Persons");
var total=0;
var a1=hd[z];
var a2="Total";
var m=6;


for (var i = 0; i <27 ; i++)
 {
   //from to 7 to 19
   if(m>6 && m<20)
   {
   var total=0;
   for (var j = 1; j <ik; j++)
   {
    n=line[j].split(",");
    if((n[z]==m)&&(n[z1]==="Total"))
     {
            total=total+parseInt(n[z2]);
            k=n[z];
     }
   }
 }
 //6 && 80
 else
 {

   for (var j = 1; j <ik; j++)
   {
    n=line[j].split(",");
    if(m==80)
   {
     hs=n[z].split("+");
     hs1=hs[0];
     //console.log(hs1);
   }
   else
   {
      hs=n[z].split("-");
      hs1=hs[1];
   }
    //hs=n[z].split("-")
    if((hs[1]==m)&&(n[z1]==="Total"))
     {
            total=total+parseInt(n[z2]);
            k=n[z];
     }
    }
  }
  if(m>5&&m<19)
  m++;
  else
    m+=5;
  c={};
  c[a1]=k;
  c[a2]=total;
  }
}
cn={}
cn[a1]=k;
cn[a2]=cn[a2]+total;
b.push(cn);
console.log(b);
/*var b1=JSON.stringify(b);
//console.log(b1);
fs.writeFile('out.json', b1,'utf8', function (err) {
 if (err) throw err;
});*/
